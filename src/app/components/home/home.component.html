<!-- <div class="dashboard-main-wrapper">
 -->
<div class="">


    <div class="dashboard-body">
        <div class="row gy-4">
            <div class="col-lg-12">
                <!-- Grettings Box Start -->
                <div
                    class="grettings-box position-relative rounded-16 bg-main-600 overflow-hidden gap-16 flex-wrap z-1">
                    <img src="assets/images/bg/grettings-pattern.png" alt=""
                        class="position-absolute inset-block-start-0 inset-inline-start-0 z-n1 w-100 h-100 opacity-6">
                    <div class="row gy-4">
                        <div class="col-sm-7">
                            <div class="grettings-box__content py-xl-4">
                                <h2 class="text-white mb-0">Bienvenido a Espatium Arquitectos</h2>
                                <p class="text-15 fw-light mt-4 text-white">Descubre el costo ideal para tu proyecto
                                    sostenible</p>
                                <p class="text-lg fw-light mt-24 text-white">Configura las características de tu
                                    construcción y obtén una estimación rápida</p>
                            </div>

                        </div>
                        <div class="col-sm-5 d-sm-block d-none">
                            <div class="text-center h-100 d-flex justify-content-center align-items-end ">
                                <img src="assets/images/thumbs/gretting-img.png" alt="">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Grettings Box End -->
            </div>
        </div>
    </div>
    <div class="dashboard-body">



        <!-- Create Course Step List Start -->
        <ul class="step-list mb-24">
            <li class="step-list__item py-15 px-24 text-15 text-heading fw-medium flex-center gap-6"
                [ngClass]="{'active': currentStep === 1}">
                <span class="icon text-xl d-flex"><i class="ph ph-number-one"></i></span>
                Datos Generales
                <span class="line position-relative"></span>
            </li>
            <li class="step-list__item py-15 px-24 text-15 text-heading fw-medium flex-center gap-6  "
                [ngClass]="{'active': currentStep === 2}">
                <span class="icon text-xl d-flex"><i class="ph ph-number-two"></i></span>
                Sección de Habitaciones y Áreas
                <span class="line position-relative"></span>
            </li>
            <li class="step-list__item py-15 px-24 text-15 text-heading fw-medium flex-center gap-6  "
                [ngClass]="{'active': currentStep === 3}">
                <span class="icon text-xl d-flex"><i class="ph ph-number-three"></i></span>
                Complementos y Circulación
                <span class="line position-relative"></span>
            </li>
            <li class="step-list__item py-15 px-24 text-15 text-heading fw-medium flex-center gap-6  "
                [ngClass]="{'active': currentStep === 4}">
                <span class="icon text-xl d-flex"><i class="ph ph-number-four"></i></span>
                Acabados de Construcción
                <span class="line position-relative"></span>
            </li>
            <li class="step-list__item py-15 px-24 text-15 text-heading fw-medium flex-center gap-6  "
                [ngClass]="{'active': currentStep === 5}">
                <span class="icon text-xl d-flex"><i class="ph ph-number-five"></i></span>
                Espacios sin Techo
                <span class="line position-relative"></span>
            </li>
            <li class="step-list__item py-15 px-24 text-15 text-heading fw-medium flex-center gap-6  "
                [ngClass]="{'active': currentStep === 6}">
                <span class="icon text-xl d-flex"><i class="ph ph-number-six"></i></span>
                Albercas
                <span class="line position-relative"></span>
            </li>
            <li class="step-list__item py-15 px-24 text-15 text-heading fw-medium flex-center gap-6  "
                [ngClass]="{'active': currentStep === 7}">
                <span class="icon text-xl d-flex"><i class="ph ph-number-seven"></i></span>
                Exteriores
                <span class="line position-relative"></span>
            </li>
            <li class="step-list__item py-15 px-24 text-15 text-heading fw-medium flex-center gap-6  "
                [ngClass]="{'active': currentStep === 8}">
                <span class="icon text-xl d-flex"><i class="ph ph-number-seven"></i></span>
                Total del Proyecto
                <span class="line position-relative"></span>
            </li>
        </ul>
        <div class="breadcrumb-with-buttons mb-24 flex-between flex-wrap gap-8">
            <!-- Precio Estimado -->
            <div class="flex-align gap-8">
                <div class="price-estimation">
                    <h5 class="mb-0">Precio Estimado:</h5>
                    <div class="price-amount text-main-600 fw-bold">
                        $ {{precioEstimado | number:'1.2-2'}}
                    </div>
                    <!-- <div class="price-amount text-main-600 fw-bold">
                        {{Total terreno | number:'1.2-2'}}
                    </div> -->
                </div>
            </div>
        </div>
        <!-- Create Course Step List End -->

        <!-- Course Tab Start -->
        <div class="card">
            <div class="card-header border-bottom border-gray-100 flex-align gap-8">
                <h5 class="mb-0">Detalles del Proyecto</h5>
                <button type="button" class="text-main-600 text-md d-flex" data-bs-toggle="tooltip"
                    data-bs-placement="top" data-bs-title="Detalles del Proyecto">
                    <i class="ph-fill ph-question"></i>
                </button>
            </div>
            <div class="card-body">
                <div *ngIf="currentStep === 1">
                    <div class="row gy-20">
                        <h5 class="text-center">Datos generales</h5>
                        <!-- CLIENTE -->
                        <div class="col-sm-4">
                            <label for="clientName" class="h5 fw-semibold font-heading mb-0">Nombres <span
                                    class="text-13 text-gray-400 fw-medium">(Requerido)</span></label>
                            <input type="text" id="clientName" class="form-control py-11"
                                placeholder="Ingrese nombre completo">
                        </div>
                        <div class="col-sm-4">
                            <label for="email" class="h5 fw-semibold font-heading mb-0">Correo <span
                                    class="text-13 text-gray-400 fw-medium">(Requerido)</span></label>
                            <input type="email" id="email" class="form-control py-11" placeholder="Correo">
                        </div>
                        <div class="col-sm-4">
                            <label for="phone" class="h5 fw-semibold font-heading mb-0">Teléfono <span
                                    class="text-13 text-gray-400 fw-medium">(Requerido)</span></label>
                            <input type="number" id="phone" class="form-control py-11" placeholder="Teléfono">
                        </div>
                        <!-- DIRECCIÓN -->
                        <div class="col-sm-6">
                            <label for="courseCategory" class="h5 mb-8 fw-semibold font-heading">Seleccione una
                                Ciudad </label>
                            <div class="position-relative">
                                <select id="courseCategory" class="form-select py-9 placeholder-13 text-15"
                                    (change)="onCiudadChange($event)">
                                    <option value="" disabled selected>Seleccione una Ciudad</option>
                                    <option *ngFor="let ciudad of (realtimeciudad.ciudades$ | async | sort:'ciudades')"
                                        value="{{ciudad.id}}">{{ciudad.ciudades}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <label for="projectAddress" class="h5 fw-semibold font-heading mb-0">Dirección completa
                                <span class="text-13 text-gray-400 fw-medium">(Requerido)</span></label>
                            <input type="text" id="projectAddress" class="form-control py-11"
                                placeholder="Ingrese la dirección">
                        </div>
                        <div class="flex-align justify-content-end gap-8">
                            <button type="button" class="btn btn-outline-main rounded-pill py-9">Cancelar</button>
                            <button type="button" class="btn btn-main rounded-pill py-9"
                                (click)="nextStep()">Continuar</button>
                        </div>
                    </div>
                </div>
                <div *ngIf="currentStep === 2">
                    <div class="row gy-20">
                        <h5>Sección de Habitaciones y Áreas</h5>

                        <!-- Altura Interior -->
                        <div class="col-sm-6">
                            <label for="alturaInterior" class="h5 mb-8 fw-semibold font-heading">Altura Interior
                                Entrepiso</label>
                            <div class="position-relative">
                                <select id="alturaInterior" class="form-select py-9 placeholder-13 text-15"
                                    (change)="onAlturaChange($event)">
                                    <option value="" disabled selected>Seleccione la altura</option>
                                    <option value="2.40">2.40 metros (Media)</option>
                                    <option value="2.60">2.60 metros (Media alta)</option>
                                    <option value="2.80">2.80 metros (Residencial)</option>
                                    <option value="3.00">3.00 metros (Residencial Plus)</option>
                                </select>
                            </div>
                        </div>

                        <!-- Tamaño del Terreno -->
                        <div class="col-sm-6">
                            <label for="tamanoTerreno" class="h5 mb-8 fw-semibold font-heading">Tamaño del
                                Terreno</label>
                            <div class="position-relative">
                                <select id="tamanoTerreno" class="form-select py-9 placeholder-13 text-15"
                                    (change)="onTamanoTerrenoChange($event)">
                                    <option value="" disabled selected>Seleccione el tamaño</option>
                                    <option value="100">100-150 m²</option>
                                    <option value="150">150-200 m²</option>
                                    <option value="200">200-250 m²</option>
                                </select>
                            </div>
                        </div>


                        <!-- Tabla de Áreas -->
                        <div class="col-12">
                            <div class="card mt-4">
                                <div class="card-body">
                                    <h6 class="mb-3">Áreas del Proyecto</h6>
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Local</th>
                                                    <th>NUM</th>
                                                    <th>Área (m²)</th>
                                                    <th>Factor</th>
                                                    <th>Tamaño por Factor</th>
                                                    <th>Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Áreas Principales -->
                                                <tr *ngFor="let area of areas; let i = index">
                                                    <td>{{area.local}}</td>
                                                    <td>
                                                        <input type="number" class="form-control form-control-sm"
                                                            [(ngModel)]="area.num" (change)="calcularTamanoPorFactor(i)"
                                                            [min]="0">
                                                    </td>
                                                    <td>
                                                        <input type="number" class="form-control form-control-sm"
                                                            [(ngModel)]="area.area"
                                                            (change)="calcularTamanoPorFactor(i)" [min]="0">
                                                    </td>
                                                    <td>{{area.factor}}</td>
                                                    <td>{{area.tamanoPorFactor | number:'1.2-2'}} m²</td>
                                                    <td>
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="checkbox"
                                                                [(ngModel)]="area.incluido"
                                                                (change)="actualizarTotales()">
                                                            <label class="form-check-label">Incluir</label>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <td colspan="3"><strong>Subtotal M² con Factor de Area</strong></td>
                                                    <td><strong>{{subtotalArea | number:'1.2-2'}} m²</strong></td>
                                                    <td></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="3"><strong>Circulación / Paredes (15%)</strong></td>
                                                    <td><strong>{{areaCirculacion | number:'1.2-2'}} m²</strong></td>
                                                    <td></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="3"><strong>Total M² con Factor de Area</strong></td>
                                                    <td><strong>{{totalAreaConFactor | number:'1.2-2'}} m²</strong></td>
                                                    <td></td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex-align justify-content-end gap-8">
                            <button type="button" class="btn btn-outline-main rounded-pill py-9"
                                (click)="previousStep()">Anterior</button>
                            <button type="button" class="btn btn-main rounded-pill py-9"
                                (click)="nextStep()">Siguiente</button>
                        </div>
                    </div>
                </div>
                <div *ngIf="currentStep === 3">
                    <div class="row gy-20">
                        <h5>Complementos y Circulación</h5>

                        <!-- Puerta de Acceso -->
                        <div class="col-sm-4">
                            <label for="puertaAcceso" class="h5 mb-8 fw-semibold font-heading">Puerta de Acceso</label>
                            <div class="position-relative">
                                <select id="puertaAcceso" class="form-select py-9 placeholder-13 text-15"
                                    (change)="onPuertaChange($event)">
                                    <option value="">Seleccione una puerta</option>
                                    <option *ngFor="let puerta of opcionesPuertasAcceso" [value]="puerta.valor">
                                        {{puerta.descripcion}}
                                    </option>
                                </select>
                            </div>
                        </div>

                        <!-- Puertas Interiores -->
                        <div class="col-sm-4">
                            <label for="puertasInteriores" class="h5 mb-8 fw-semibold font-heading">Puertas
                                Interiores</label>
                            <div class="position-relative">
                                <select id="puertasInteriores" class="form-select py-9 placeholder-13 text-15"
                                    (change)="onPuertasInterioresChange($event)">
                                    <option value="">Seleccione puertas interiores</option>
                                    <option *ngFor="let puerta of opcionesPuertasInteriores" [value]="puerta.valor">
                                        {{puerta.descripcion}} ({{puerta.tipoConstruccion}})
                                    </option>
                                </select>
                            </div>
                        </div>

                        <!-- Closets y Vestidores -->
                        <div class="col-sm-4">
                            <label for="closetsVestidores" class="h5 mb-8 fw-semibold font-heading">Closets y
                                Vestidores</label>
                            <div class="position-relative">
                                <select id="closetsVestidores" class="form-select py-9 placeholder-13 text-15"
                                    (change)="onClosetsVestidoresChange($event)">
                                    <option value="">Seleccione closets y vestidores</option>
                                    <option *ngFor="let closet of opcionesClosetsVestidores" [value]="closet.valor">
                                        {{closet.descripcion}} ({{closet.tipoConstruccion}})
                                    </option>
                                </select>
                            </div>
                        </div>

                        <!-- Cancelería -->
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label for="canceleria" class="h5 mb-8 fw-semibold font-heading">Cancelería de
                                    Aluminio y Ventanas:</label>
                                <div class="position-relative">
                                    <select id="canceleria" class="form-control" (change)="onCanceleriaChange($event)">
                                        <option value="">Seleccione tipo de cancelería</option>
                                        <option *ngFor="let canceleria of opcionesCanceleria"
                                            [value]="canceleria.valor">
                                            {{canceleria.descripcion}} ({{canceleria.tipoConstruccion}})
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Forma de Material -->
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label for="formaMaterial" class="h5 mb-8 fw-semibold font-heading">Forma de
                                    Material:</label>
                                <div class="position-relative">
                                    <select id="formaMaterial" class="form-control"
                                        (change)="onFormaMaterialChange($event)">
                                        <option value="">Seleccione forma de material</option>
                                        <option *ngFor="let forma of opcionesFormaMaterial" [value]="forma.valor">
                                            {{forma.descripcion}} ({{forma.tipoConstruccion}})
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <!-- Cocina Integral -->
                        <div class="col-sm-4">
                            <label for="cocinaIntegral" class="h5 mb-8 fw-semibold font-heading">Línea Blanca Cocina
                                Integral</label>
                            <div class="position-relative">
                                <select id="cocinaIntegral" class="form-select py-9 placeholder-13 text-15"
                                    (change)="onCocinaIntegralChange($event)">
                                    <option value="">Seleccione equipamiento de cocina</option>
                                    <option value="34000">Media: Electrodomésticos básicos LG ($34,000)</option>
                                    <option value="67000">Media alta: Electrodomésticos Teka ($67,000)</option>
                                    <option value="124000">Residencial: Cocina integral 5m con Smeg ($124,000)</option>
                                    <option value="660999.30">Residencial Plus: Cocina premium con Wolf ($660,999.30)
                                    </option>
                                </select>
                            </div>
                        </div>

                        <!-- Muebles de Baño -->
                        <div class="col-sm-4">
                            <label for="mueblesBano" class="h5 mb-8 fw-semibold font-heading">Muebles de Baño y
                                Accesorios</label>
                            <div class="position-relative">
                                <select id="mueblesBano" class="form-select py-9 placeholder-13 text-15"
                                    (change)="onMueblesBanoChange($event)">
                                    <option value="">Seleccione tipo de muebles de baño</option>
                                    <option value="media">Media: Mezcladoras y accesorios básicos</option>
                                    <option value="semilujo">Media alta: Mezcladoras y accesorios premium</option>
                                    <option value="residencial">Residencial: Mezcladoras y accesorios de alta gama
                                    </option>
                                    <option value="residencial_plus">Residencial Plus: Mezcladoras y accesorios de lujo
                                    </option>
                                </select>
                            </div>
                        </div>

                        <!-- Iluminación y Accesorios -->
                        <div class="col-sm-4">
                            <label for="iluminacion" class="h5 mb-8 fw-semibold font-heading">Iluminación y
                                Telecomunicaciones</label>
                            <div class="position-relative">
                                <select id="iluminacion" class="form-select py-9 placeholder-13 text-15"
                                    (change)="onIluminacionChange($event)">
                                    <option value="">Seleccione tipo de iluminación</option>
                                    <option value="media">Media: Luminarias y accesorios básicos</option>
                                    <option value="semilujo">Media alta: Luminarias y accesorios premium</option>
                                    <option value="residencial">Residencial: Luminarias y accesorios de alta gama
                                    </option>
                                    <option value="residencial_plus">Residencial Plus: Iluminación indirecta y
                                        accesorios de lujo</option>
                                </select>
                            </div>
                        </div>

                        <!-- Sección de Extras -->
                        <div class="card mt-4">
                            <div class="card-header">
                                <h5>Extras y Equipamiento Adicional</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Extra</th>
                                                <th>Incluir</th>
                                                <th>Cantidad</th>
                                                <th>Costo por Unidad</th>
                                                <!-- <th>Área Total Factor</th> -->
                                                <th>Costo por Área</th>
                                                <!-- <th>Total</th> -->
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let extra of extras; let i = index">
                                                <td>{{extra.nombre}}</td>
                                                <td>
                                                    <input type="checkbox" [(ngModel)]="extra.incluido"
                                                        (change)="calcularTotalExtra(i)">
                                                </td>
                                                <td>
                                                    <input type="number" [(ngModel)]="extra.cantidad"
                                                        (change)="calcularTotalExtra(i)" min="0"
                                                        [disabled]="!extra.incluido"
                                                        class="form-control form-control-sm">
                                                </td>
                                                <td>${{extra.costoPorUnidad | number:'1.2-2'}}</td>
                                                <!-- <td>{{totalAreaConFactor | number:'1.2-2'}} m²</td> -->
                                                <td>${{extra.nombre === 'UNIDAD DE RE CARGA ELÉCTRICA VEHICULAR' ?
                                                    extra.costoPorUnidad :
                                                    (extra.costoPorUnidad * totalAreaConFactor) | number:'1.2-2'}}</td>
                                                <!-- <td>${{extra.total | number:'1.2-2'}}</td> -->
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="6" class="text-end"><strong>Total Extras:</strong></td>
                                                <td><strong>${{totalExtras | number:'1.2-2'}}</strong></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <!-- Sección de Instalaciones Especiales -->
                        <div class="card mt-4">
                            <div class="card-header">
                                <h5>Instalaciones Especiales - Climatización A/C, Calefacción y Sistemas de Generación
                                    de Energía</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Instalación</th>
                                                <th>Incluir</th>
                                                <th>Costo por M²</th>
                                                <!--   <th>Área Total Factor</th> -->
                                                <th>Costo por Área</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let instalacion of instalacionesEspeciales; let i = index">
                                                <td>{{instalacion.nombre}}</td>
                                                <td>
                                                    <input type="checkbox" [(ngModel)]="instalacion.incluido"
                                                        (change)="calcularTotalInstalacion(i)">
                                                </td>
                                                <td>${{instalacion.costoPorM2 | number:'1.2-2'}}/m²</td>
                                                <!--  <td>{{totalAreaConFactor | number:'1.2-2'}} m²</td> -->
                                                <td>${{instalacion.nombre === 'SISTEMA DE GENERACIÓN DE ENERGÍA SOLAR' ?
                                                    (instalacion.costoPorM2 * totalAreaConFactor) :
                                                    (instalacion.costoPorM2 * totalAreaConFactor) | number:'1.2-2'}}
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="4" class="text-end"><strong>Total Instalaciones:</strong>
                                                </td>
                                                <td><strong>${{totalInstalaciones | number:'1.2-2'}}</strong></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <!-- instalaciones especiales -->
                        <div class="card mt-4">
                            <div class="card-header">
                                <h5>Sistemas de Generación de Energía</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Sistema</th>
                                                <th>Incluir</th>
                                                <th>Costo por M²</th>
                                                <th>Costo Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Paneles Solares Fotovoltaicos</td>
                                                <td>
                                                    <input type="checkbox" [(ngModel)]="sistemaSolarIncluido"
                                                        (change)="calcularCostoSistemaEnergia()">
                                                </td>
                                                <td>$450.00/m²</td>
                                                <td>${{costoSistemaEnergia | number:'1.2-2'}}</td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="3" class="text-end"><strong>Total Sistema de
                                                        Energía:</strong></td>
                                                <td><strong>${{costoSistemaEnergia | number:'1.2-2'}}</strong></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>


                        <div class="flex-align justify-content-end gap-8">
                            <button type="button" class="btn btn-outline-main rounded-pill py-9"
                                (click)="previousStep()">Anterior</button>
                            <button type="button" class="btn btn-main rounded-pill py-9"
                                (click)="nextStep()">Siguiente</button>
                        </div>
                    </div>
                </div>
                <div *ngIf="currentStep === 4">
                    <div class="row gy-20">
                        <h5>Acabados de Construcción</h5>

                        <!-- Sección existente de Pisos y Lambrines -->
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label for="pisos" class="h5 mb-8 fw-semibold font-heading">Acabados en Pisos y
                                    Lambrines Interiores:</label>
                                <div class="position-relative">
                                    <select id="pisos" class="form-control" (change)="onPisosChange($event)">
                                        <option value="">Seleccione tipo de acabado</option>
                                        <option *ngFor="let piso of opcionesPisos" [value]="piso.valor">
                                            {{piso.descripcion}} ({{piso.tipoConstruccion}})
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Nueva sección de Acabados de Techos -->
                        <div class="col-12">
                            <div class="card mt-4">
                                <div class="card-header">
                                    <h5>Acabados de Techos y Azoteas</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Tipo de Acabado</th>
                                                    <th>Costo por M²</th>
                                                    <th>Descripción</th>
                                                    <th>Incluir</th>
                                                    <th>Costo Total</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let acabado of acabadosTecho; let i = index">
                                                    <td>{{acabado.tipo}}</td>
                                                    <td>${{acabado.costoPorM2 | number:'1.2-2'}}/m²</td>
                                                    <td>{{acabado.descripcion}}</td>
                                                    <td>
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="checkbox"
                                                                [(ngModel)]="acabado.incluido"
                                                                (change)="calcularCostoAcabadosTecho()">
                                                        </div>
                                                    </td>
                                                    <td>${{acabado.incluido ? (acabado.costoPorM2 * totalAreaConFactor)
                                                        : 0 | number:'1.2-2'}}</td>
                                                </tr>
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <td colspan="4" class="text-end"><strong>Total Acabados de
                                                            Techos:</strong></td>
                                                    <td><strong>${{costoTotalAcabadosTecho | number:'1.2-2'}}</strong>
                                                    </td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex-align justify-content-end gap-8">
                            <button type="button" class="btn btn-outline-main rounded-pill py-9"
                                (click)="previousStep()">Anterior</button>
                            <button type="button" class="btn btn-main rounded-pill py-9"
                                (click)="nextStep()">Siguiente</button>
                        </div>
                    </div>
                </div>
                <div *ngIf="currentStep === 5">
                    <div class="row gy-20">
                        <h5>Fachadas</h5>

                        <div class="col-6">
                            <div class="form-group">
                                <label for="fachada" class="h5 mb-8 fw-semibold font-heading">Tipo de Fachada:</label>
                                <div class="position-relative">
                                    <select id="fachada" class="form-select py-9 placeholder-13 text-15"
                                        (change)="onFachadaChange($event)">
                                        <option value="">Seleccione tipo de fachada</option>
                                        <option *ngFor="let fachada of opcionesFachadas" [value]="fachada.tipo">
                                            {{fachada.tipo}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Mostrar la selección actual si existe -->
                        <div class="col-12 mt-3" *ngIf="tipoFachadaSeleccionada">
                            <div class="alert alert-info">
                                <strong>Fachada seleccionada:</strong> {{tipoFachadaSeleccionada}}
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5>Materiales Sustentables Opcionales</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Tipo</th>
                                                    <th>Ancho terreno</th>
                                                    <th>Altura interior</th>
                                                    <th>Niveles</th>
                                                    <th>Fachadas</th>
                                                    <th>Superficie</th>
                                                    <th>Costo por M²</th>
                                                    <th>Seleccionar</th>
                                                    <th>Total</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let material of materialesSustentables; let i = index">
                                                    <td>{{material.tipo}}</td>
                                                    <td>{{material.anchoTerreno}}</td>
                                                    <td>{{material.alturaInterior}}</td>
                                                    <td>{{material.numNiveles}}</td>
                                                    <td>{{material.fachadas}}</td>
                                                    <td>{{material.superficie}} m²</td>
                                                    <td>${{material.costoPorM2 | number:'1.2-2'}}/m²</td>
                                                    <td>
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="radio"
                                                                name="materialSustentableRadio"
                                                                [checked]="materialSustentableSeleccionado === i"
                                                                (change)="seleccionarMaterialSustentable(i)">
                                                        </div>
                                                    </td>
                                                    <td>${{material.incluido ? (material.superficie *
                                                        material.costoPorM2) : 0 | number:'1.2-2'}}</td>
                                                </tr>
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <td colspan="8" class="text-end"><strong>Total Materiales
                                                            Sustentables:</strong></td>
                                                    <td><strong>${{costoTotalMaterialesSustentables |
                                                            number:'1.2-2'}}</strong></td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex-align justify-content-end gap-8">
                            <button type="button" class="btn btn-outline-main rounded-pill py-9"
                                (click)="previousStep()">Anterior</button>
                            <button type="button" class="btn btn-main rounded-pill py-9"
                                (click)="nextStep()">Siguiente</button>
                        </div>
                    </div>
                </div>
                <div *ngIf="currentStep === 6">
                    <div class="row gy-20">
                        <h5>Albercas</h5>

                        <!-- Selección de Alberca Base -->
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5>Selección de Alberca</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Tipo</th>
                                                    <th>Dimensiones</th>
                                                    <th>Área</th>
                                                    <th>Costo por M²</th>
                                                    <th>Incluir</th>
                                                    <th>Costo Base</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let alberca of albercas; let i = index">
                                                    <td>{{alberca.tipo}}</td>
                                                    <td>{{alberca.dimensiones}}</td>
                                                    <td>{{alberca.area}} m²</td>
                                                    <td>${{alberca.costoPorM2 | number:'1.2-2'}}/m²</td>
                                                    <td>
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="radio"
                                                                name="albercaRadio"
                                                                [checked]="albercaSeleccionada === i"
                                                                (change)="seleccionarAlberca(i)">
                                                        </div>
                                                    </td>
                                                    <td>${{alberca.incluido ? (alberca.area * alberca.costoPorM2) : 0 |
                                                        number:'1.2-2'}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Acabados Interiores -->
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5>Acabado Interior</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Tipo</th>
                                                    <th>Costo por M²</th>
                                                    <th>Seleccionar</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let acabado of acabadosInterior; let i = index">
                                                    <td>{{acabado.tipo}}</td>
                                                    <td>${{acabado.costoPorM2 | number:'1.2-2'}}/m²</td>
                                                    <td>
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="radio"
                                                                name="acabadoInteriorRadio"
                                                                [checked]="acabadoInteriorSeleccionado === i"
                                                                (change)="seleccionarAcabadoInterior(i)">
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Acabados Exteriores -->
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5>Acabado Exterior/Andador</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Tipo</th>
                                                    <th>Costo por M²</th>
                                                    <th>Seleccionar</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let acabado of acabadosExterior; let i = index">
                                                    <td>{{acabado.tipo}}</td>
                                                    <td>${{acabado.costoPorM2 | number:'1.2-2'}}/m²</td>
                                                    <td>
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="radio"
                                                                name="acabadoExteriorRadio"
                                                                [checked]="acabadoExteriorSeleccionado === i"
                                                                (change)="seleccionarAcabadoExterior(i)">
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Sistema de Calefacción -->
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5>Sistema de Calefacción</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Tipo</th>
                                                    <th>Costo por M²</th>
                                                    <th>Seleccionar</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let sistema of sistemasCalefaccion; let i = index">
                                                    <td>{{sistema.tipo}}</td>
                                                    <td>${{sistema.costoPorM2 | number:'1.2-2'}}/m²</td>
                                                    <td>
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="radio"
                                                                name="calefaccionRadio"
                                                                [checked]="calefaccionSeleccionada === i"
                                                                (change)="seleccionarCalefaccion(i)">
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Total -->
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <h5>Total Alberca: ${{costoTotalAlbercas | number:'1.2-2'}}</h5>
                                </div>
                            </div>
                        </div>

                        <div class="flex-align justify-content-end gap-8">
                            <button type="button" class="btn btn-outline-main rounded-pill py-9"
                                (click)="previousStep()">Anterior</button>
                            <button type="button" class="btn btn-main rounded-pill py-9"
                                (click)="nextStep()">Siguiente</button>
                        </div>
                    </div>
                </div>
                <div *ngIf="currentStep === 7">
                    <div class="row gy-20">
                        <h5>Exteriores</h5>

                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5>Áreas Exteriores</h5>
                                    <p class="text-muted mb-0">40% DE LA SUPERFICIE LIBRE DE CONSTRUCCIÓN</p>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Tipo</th>
                                                    <th>Superficie Total</th>
                                                    <th>40% Superficie</th>
                                                    <th>Costo por M²</th>
                                                    <th>Seleccionar</th>
                                                    <th>Total</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let area of areasExteriores; let i = index">
                                                    <td>{{area.tipo}}</td>
                                                    <td>{{tamanoTerrenoSeleccionado}} m²</td>
                                                    <td>{{tamanoTerrenoSeleccionado * 0.4 | number:'1.2-2'}} m²</td>
                                                    <td>${{area.costoPorM2 | number:'1.2-2'}}/m²</td>
                                                    <td>
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="radio"
                                                                name="areaExteriorRadio"
                                                                [checked]="areaExteriorSeleccionada === i"
                                                                (change)="seleccionarAreaExterior(i)">
                                                        </div>
                                                    </td>
                                                    <td>${{area.incluido ? (tamanoTerrenoSeleccionado * 0.4 *
                                                        area.costoPorM2) : 0 | number:'1.2-2'}}</td>
                                                </tr>
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <td colspan="5" class="text-end"><strong>Total Áreas
                                                            Exteriores:</strong></td>
                                                    <td><strong>${{costoTotalAreasExteriores | number:'1.2-2'}}</strong>
                                                    </td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                    <!-- Dentro del step 7, después de la sección de áreas exteriores -->
                                    <div class="col-12">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5>Jardinería y Paisajismo</h5>
                                                <p class="text-muted mb-0">60% DE LA SUPERFICIE LIBRE DE CONSTRUCCIÓN
                                                </p>
                                            </div>
                                            <div class="card-body">
                                                <div class="table-responsive">
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th>Tipo</th>
                                                                <th>Descripción</th>
                                                                <th>Superficie Total</th>
                                                                <th>60% Superficie</th>
                                                                <th>Costo por M²</th>
                                                                <th>Seleccionar</th>
                                                                <th>Total</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let jardin of jardineria; let i = index">
                                                                <td>{{jardin.tipo}}</td>
                                                                <td>{{jardin.descripcion}}</td>
                                                                <td>{{jardin.tipo !== 'Árbol de laurel' ?
                                                                    tamanoTerrenoSeleccionado : 'N/A'}} m²</td>
                                                                <td>{{jardin.tipo !== 'Árbol de laurel' ?
                                                                    (tamanoTerrenoSeleccionado * 0.6 | number:'1.2-2') :
                                                                    'N/A'}} m²</td>
                                                                <td>${{jardin.costoPorM2 | number:'1.2-2'}}{{jardin.tipo
                                                                    === 'Árbol de laurel' ? '' : '/m²'}}</td>
                                                                <td>
                                                                    <div class="form-check">
                                                                        <input class="form-check-input" type="radio"
                                                                            name="jardineriaRadio"
                                                                            [checked]="jardineriaSeleccionada === i"
                                                                            (change)="seleccionarJardineria(i)">
                                                                    </div>
                                                                </td>
                                                                <td>${{jardin.incluido ?
                                                                    (jardin.tipo === 'Árbol de laurel' ?
                                                                    jardin.costoPorM2 :
                                                                    (tamanoTerrenoSeleccionado * 0.6 *
                                                                    jardin.costoPorM2)) :
                                                                    0 | number:'1.2-2'}}</td>
                                                            </tr>
                                                        </tbody>
                                                        <tfoot>
                                                            <tr>
                                                                <td colspan="6" class="text-end"><strong>Total
                                                                        Jardinería:</strong></td>
                                                                <td><strong>${{costoTotalJardineria |
                                                                        number:'1.2-2'}}</strong></td>
                                                            </tr>
                                                        </tfoot>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex-align justify-content-end gap-8">
                            <button type="button" class="btn btn-outline-main rounded-pill py-9"
                                (click)="previousStep()">Anterior</button>
                            <button type="button" class="btn btn-main rounded-pill py-9"
                                (click)="nextStep()">Siguiente</button>
                        </div>
                    </div>
                </div>
                <div *ngIf="currentStep === 8">
                    <h5>Totales del proyecto</h5>
                </div>
            </div>
        </div>
        <!-- Course Tab End -->

        <!-- Botón para mostrar/ocultar -->
        <button class="btn btn-outline-main rounded-pill py-9 mb-3" (click)="mostrarResultados = !mostrarResultados">
            {{ mostrarResultados ? 'Ocultar Resultados' : 'Mostrar Resultados' }}
            <i class="ph" [ngClass]="mostrarResultados ? 'ph-caret-up' : 'ph-caret-down'"></i>
        </button>

        <!-- Card con los resultados -->
        <div class="col-12" *ngIf="mostrarResultados">
            <div class="card">
                <div class="card-body">
                    <h6 class="mb-3">Resultados del cálculo:</h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>Ciudad seleccionada:</strong> {{ciudadSeleccionada}}</p>
                            <p><strong>Tamaño total del terreno:</strong> {{tamanoTerrenoSeleccionado}} m²</p>
                            <p><strong>Área construible (COS 50%):</strong> {{areaConstructible}} m²</p>
                            <p><strong>Tipo de puerta:</strong> {{tipoPuertaAcceso}}</p>
                            <p><strong>Tipo de puertas interiores:</strong> {{tipoPuertasInteriores}}</p>
                            <p><strong>Tipo de closets y vestidores:</strong> {{tipoClosetsVestidores}}</p>
                            <p><strong>Tipo de cocina integral:</strong> {{tipoCocinaIntegral}}</p>
                            <p><strong>Tipo de cancelería:</strong> {{tipoCanceleria}}</p>
                            <p><strong>Tipo de pisos:</strong> {{tipoPisos}}</p>
                            <p><strong>Forma de material:</strong> {{tipoFormaMaterial}}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Área libre:</strong> {{areaLibre}} m²</p>
                            <p><strong>Factor de costo por ciudad:</strong> ${{factorCostoCiudad}}</p>
                            <p><strong>Precio estimado:</strong> ${{precioEstimado | number:'1.2-2'}}</p>
                            <p><strong>Subtotal M² con Factor de Area:</strong> {{subtotalArea | number:'1.2-2'}} m²</p>
                            <p><strong>Circulación / Paredes (15%):</strong> {{areaCirculacion | number:'1.2-2'}} m²</p>
                            <p><strong>Total M² con Factor de Area:</strong> {{totalAreaConFactor | number:'1.2-2'}} m²
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>